{% trans_default_domain 'messages' %}

{{ form_start(form, { 'id' : 'wizard_advanced_form' }) }}
    <div class="uk-grid" data-uk-grid-margin>
        <div class="uk-width-large-1-3">
            <div class="md-card">
                <div class="md-card-toolbar">
                    <h3 class="md-card-toolbar-heading-text">
                        Infos du donateur
                    </h3>
                </div>
                <div class="md-card-content">
                    <div class="uk-grid">
                        <div class="uk-width-medium-1-1">
                            {{ form_label(form.author) }}
                            {{ form_widget(form.author) }}
                        </div>
                    </div>
                    <div class="uk-grid">
                        <div class="uk-width-medium-1-1">
                            {{ form_label(form.email) }}
                            {{ form_widget(form.email) }}
                        </div>
                    </div>
                    <div class="uk-grid">
                        <div class="uk-width-medium-1-1">
                            {{ form_label(form.phone) }}
                            {{ form_widget(form.phone) }}
                        </div>
                    </div>
                    <div class="uk-grid">
                        <div class="uk-width-medium-1-1">
                            {{ form_label(form.address) }}
                            {{ form_widget(form.address) }}
                        </div>
                    </div>
                </div>
            </div>
            <div class="md-card">
                <div class="md-card-toolbar">
                    <h3 class="md-card-toolbar-heading-text">
                        Montant de la donation
                    </h3>
                </div>
                <div class="md-card-content">
                    <div class="uk-grid uk-margin-bottom">
                        <div class="uk-width-medium-1-1">
                            {{ form_label(form.cause) }}
                            {{ form_widget(form.cause) }}
                        </div>
                    </div>
                    <div class="uk-grid">
                        <div class="uk-width-medium-1-1">
                            {{ form_label(form.totalAmount) }}
                            {{ form_widget(form.totalAmount) }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="uk-width-large-2-3">
            <div class="md-card">
                <div class="md-card-toolbar">
                    <h3 class="md-card-toolbar-heading-text">
                        Echélonnage de la donation
                    </h3>
                </div>
                 <div class="md-card-content" id="container-element">
                    {% if donation is defined and donation.donationLines is not empty %}
                        {% for key, donationLine in donation.donationLines %}
                            <div class="uk-grid uk-margin-bottom" id="container_elements_{{ key }}">
                                <div class="uk-width-medium-1-4">
                                    <input class="md-input" type="text" name="donation_line_date_{{ key }}" id="donation_line_date_{{ key }}" data-uk-datepicker="{format:'DD-MM-YYYY'}" placeholder="{{ 'charity.property.donationLine.donatedAt'|trans }}" value="{{ donationLine.donatedAt }}">
                                </div>
                                <div class="uk-width-medium-1-4">
                                    <input type="number" name="donation_line_amount_{{ key }}" id="donation_line_amount_{{ key }}" required class="md-input" placeholder="{{'charity.property.donationLine.amount'|trans }}" value="{{ donationLine.amount }}"/>
                                </div>
                                <div class="uk-width-medium-1-4 uk-margin-small-top">
                                    <select id="donation_line_status_{{ key }}" data-md-selectize name="donation_line_status_{{ key }}" required>
                                        <option value="">{{'charity.property.donationLine.status'|trans }}</option>
                                        <option value="0" {% if donationLine.status == 0 %}selected{% endif %}>{{'charity.default_value.donationLine.status.unpaid'|trans }}</option>
                                        <option value="1" {% if donationLine.status == 0 %}selected{% endif %}>{{'charity.default_value.donationLine.status.paid'|trans }}</option>
                                    </select>
                                </div>
                                <div class="uk-width-medium-1-4 uk-margin-small-top uk-text-right">
                                    <a href="#" data-tooltip title="{{ 'button.remove'|trans }}" id="{{ key }}" class="remove_element_link md-btn md-btn-flat md-btn-flat-danger">
                                        {{ 'button.remove'|trans }}
                                        <i class="fa fa-times-circle"></i>
                                    </a>
                                </div>
                            </div>
                        {% endfor %}
                    {% else %}
                        <div class="uk-grid uk-margin-bottom" id="container_elements_1">
                            <div class="uk-width-medium-1-4">
                                <input class="md-input" type="text" name="donation_line_date_1" id="donation_line_date_1" data-uk-datepicker="{format:'DD-MM-YYYY'}" placeholder="Date">
                            </div>
                            <div class="uk-width-medium-1-4">
                                <input type="number" name="donation_line_amount_1" id="donation_line_amount_1" required class="md-input" placeholder="Montant"/>
                            </div>
                            <div class="uk-width-medium-1-4 uk-margin-small-top">
                                <select id="donation_line_status_1" data-md-selectize name="donation_line_status_1" required>
                                    <option value="">Etat</option>
                                    <option value="0">Intention</option>
                                    <option value="1">Payé</option>
                                </select>
                            </div>
                            <div class="uk-width-medium-1-4 uk-margin-small-top uk-text-right">
                                <a href="#" data-tooltip title="{{ 'button.remove'|trans }}" id="1" class="remove_element_link md-btn md-btn-flat md-btn-flat-danger">
                                    {{ 'button.remove'|trans }}
                                    <i class="fa fa-times-circle"></i>
                                </a>
                            </div>
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="uk-width-medium-1-12 uk-text-center">
                <a href="#" class="md-btn md-btn-flat md-btn-flat-primary" id="add-element-link">Ajouter un echelon</a>
                {% set countElements = donation is defined and donation.donationLines|length  > 0 ?  donation.donationLines|length : 1 %}
                <input type="hidden" name="countElements" id="count_elements" value="{{ countElements }}">
            </div>
            <input type="hidden" id="prototype" value='<div class="uk-width-medium-2-5"><div class="uk-form-row"><input type="text" id="name_index" name="name_index" class="md-input" required placeholder="{{ "layout.name"|trans }}"></div></div><div class="uk-width-medium-2-5"><div class="uk-form-row"><input type="text" name="value_index" class="md-input" required placeholder="{{ "layout.value"|trans }}"></div></div><div class="uk-width-medium-1-5 uk-text-right"><div class="uk-form-row text-left uk-margin-top"><a href="#" id="index" class="remove_element_link uk-text-danger">{{ "button.remove"|trans }} <i class="fa fa-times-circle" aria-hidden="true"></i></a></div></div>'>
        </div>
    </div>
    <div class="md-fab-wrapper">
        <button class="md-fab md-fab-success" type="submit">
            <i class="material-icons">&#xE161;</i>
        </button>
    </div>
{{ form_end(form) }}